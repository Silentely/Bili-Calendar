<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="page.title">B站追番日历订阅</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <meta name="theme-color" content="#00a1d6" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="追番日历" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script type="module" src="/src/main.js"></script>
  </head>
  <body>
    <div class="floating-controls">
      <button
        class="theme-switcher"
        id="themeSwitcher"
        data-i18n-aria-label="theme.switch"
        aria-label="切换主题"
        data-i18n-title="theme.switch"
        title="切换主题"
      >
        <i class="fas fa-moon" id="themeIcon"></i>
      </button>
    </div>

    <div class="main-container">
      <div class="app-header">
        <div class="logo-container">
          <i class="fas fa-calendar-alt app-icon"></i>
          <div class="app-title" data-i18n="app.title">B站追番日历</div>
        </div>
        <div class="header-actions">
          <button
            type="button"
            class="language-btn"
            id="languageBtn"
            data-i18n-aria-label="language.switcher"
            aria-label="选择语言"
            data-i18n-title="language.switcher"
            title="选择语言"
          >
            <i class="fas fa-language" aria-hidden="true"></i>
            <span id="languageToggleLabel" data-i18n="language.button">English</span>
          </button>
          <a
            href="https://github.com/Silentely/Bili-Calendar"
            target="_blank"
            rel="noopener noreferrer"
            class="github-btn"
            data-i18n-aria-label="app.githubAria"
            aria-label="在新窗口打开 GitHub 仓库"
          >
            <i class="fab fa-github" aria-hidden="true"></i>
            <span data-i18n="app.github">GitHub</span>
          </a>
        </div>
      </div>

      <div class="page-title">
        <h1 data-i18n="page.title">B站追番日历订阅</h1>
        <p data-i18n="app.subtitle">输入您的B站用户ID(UID)，获取追番日历订阅链接</p>
      </div>

      <div class="input-section">
        <div class="input-group">
          <input
            type="text"
            id="uidInput"
            class="form-control"
            data-i18n-placeholder="input.placeholder"
            placeholder="例如: 614500"
          />
          <button
            class="btn-primary"
            id="generateBtn"
            data-i18n-aria-label="input.generate"
            aria-label="生成订阅"
            data-i18n-title="input.generate"
            title="生成订阅"
          >
            <i class="fas fa-magic"></i>
            <span data-i18n="input.generate">生成订阅</span>
          </button>
          <button
            class="btn-outline"
            id="previewBtn"
            data-i18n-aria-label="input.preview"
            aria-label="预览番剧"
            data-i18n-title="input.preview"
            title="预览番剧"
          >
            <i class="fas fa-eye"></i>
            <span data-i18n="input.preview">预览番剧</span>
          </button>
        </div>
        <div class="help-text">
          <i class="fas fa-info-circle"></i>
          <span data-i18n-html="input.help">
            UID可在B站个人空间网址中找到，例如：https://space.bilibili.com/<strong>614500</strong>
          </span>
        </div>
      </div>

      <div class="loading" id="loadingIndicator">
        <span class="spinner"></span>
        <span data-i18n="loading.text">正在获取数据，请稍候...</span>
      </div>

      <div class="result-box" id="resultBox">
        <h3>
          <i class="fas fa-check-circle"></i>
          <span data-i18n="result.success">订阅链接生成成功</span>
        </h3>
        <p data-i18n="result.description">请复制以下链接并添加到您的日历应用中：</p>
        <div class="subscribe-url" id="subscribeUrl"></div>
        <div class="btn-group">
          <button
            class="btn btn-outline-primary"
            id="copyBtn"
            data-i18n-aria-label="result.copy"
            aria-label="复制订阅链接"
            data-i18n-title="result.copy"
            title="复制订阅链接"
          >
            <i class="fas fa-copy"></i>
            <span data-i18n="result.copy">复制链接</span>
          </button>
          <a
            href="#"
            id="subscribeLink"
            class="btn btn-success"
            target="_blank"
            data-i18n-aria-label="result.addToCalendar"
            aria-label="添加到日历"
            data-i18n-title="result.addToCalendar"
            title="添加到日历"
          >
            <i class="fas fa-calendar-plus"></i>
            <span data-i18n="result.addToCalendar">添加到日历</span>
          </a>
        </div>
        <div class="instructions">
          <h4>
            <i class="fas fa-lightbulb"></i>
            <span data-i18n="result.instructions">使用说明</span>
          </h4>
          <ul>
            <li data-i18n-html="result.apple">
              <strong>Apple 日历</strong>：打开设置 &gt; 密码与账户 &gt; 添加账户 &gt; 其他 &gt;
              添加已订阅日历
            </li>
            <li data-i18n-html="result.google">
              <strong>Google 日历</strong>：在左侧"我的日历"下点击"添加其他日历" &gt; "从URL添加"
            </li>
            <li data-i18n-html="result.outlook">
              <strong>Outlook</strong>：在日历视图中点击"添加日历" &gt; "从Internet"
            </li>
          </ul>
        </div>
      </div>

      <div class="info-section">
        <h3>
          <i class="fas fa-star"></i>
          <span data-i18n="features.title">功能特色</span>
        </h3>
        <ul>
          <li data-i18n="features.smart">
            智能识别连载状态：连载中番剧自动设置每周重复，完结番剧仅保留首播时间
          </li>
          <li data-i18n="features.compatible">
            生成的日历可添加到 Apple 日历、Google 日历、Outlook 等
          </li>
          <li data-i18n="features.auto">每集更新时间会自动添加到您的日历中</li>
          <li data-i18n="features.permanent">日历链接长期有效，无需重复订阅</li>
        </ul>
        <div class="privacy-warning">
          <i class="fas fa-exclamation-triangle"></i>
          <span data-i18n="features.privacy"
            >重要提醒：您的追番数据必须设置为公开，否则无法获取</span
          >
        </div>
      </div>

      <footer class="app-footer" data-i18n-aria-label="footer.copyright" aria-label="版权声明">
        © <span id="copyrightYear"></span> <span data-i18n="app.title">B站追番日历</span>.
        <span data-i18n="footer.copyright">保留所有权利。</span>
      </footer>
    </div>

    <button
      class="help-button"
      id="helpBtn"
      data-i18n-aria-label="footer.help"
      aria-label="显示使用指南"
      data-i18n-title="footer.help"
      title="显示使用指南"
    >
      <i class="fas fa-question"></i>
    </button>

    <button
      class="history-button"
      id="historyBtn"
      data-i18n-aria-label="footer.history"
      aria-label="查看历史记录"
      data-i18n-title="footer.history"
      title="查看历史记录"
    >
      <i class="fas fa-history"></i>
    </button>

    <div class="progress-bar-container" id="progressBar">
      <div class="progress-bar"></div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
      <div class="circular-loader">
        <svg width="60" height="60">
          <circle class="circular-loader-bg" cx="30" cy="30" r="25"></circle>
          <circle class="circular-loader-progress" cx="30" cy="30" r="25"></circle>
        </svg>
      </div>
      <p class="loading-text" data-i18n="loading.processing">正在处理请求...</p>
    </div>
  </body>
</html>
